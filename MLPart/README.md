**GorkiyCode** — модульная RAG-система со средствами обработки документов, извлечения сущностей, построения и управления графовой и векторной базой знаний на современных NLP/ML технологиях.

## Структура проекта
```
├── input_files/           # Папка с исходными данными: документы, файлы
├── ocr_texts/             # Папка с преобразованными .txt файлами после OCR и парсинга
├── routes/                # Точки входа для сервисных сценариев
│   ├── ask.py             # Запрос вопросов к базе знаний
│   └── ingest.py          # Загрузка и обработка новых документов
├── scripts/               # Основные скрипты работы с данными
│   ├── ask.py             # Генерация ответа по пользовательскому запросу
│   └── ingest.py          # Интеграция новых документов в БЗ
├── services/              # Вспомогательные сервисы и модули
│   ├── embeddings.py      # Работа с эмбеддингами и моделями Cloud.ru/OpenAI
│   ├── entity_extractor.py # Извлечение сущностей из текста
│   ├── html_parser.py      # Парсинг и обработка HTML
│   ├── models.py           # Вспомогательные модели и структуры
│   ├── neo4j_manager.py    # Управление графовой БД Neo4j
│   ├── ocr.py              # Обработка файлов разных форматов с выводом в .txt
│   ├── qdrant_manager.py   # Управление векторной БД Qdrant
│   └── rag_system.py       # Основной модуль RAG-логики и поиска
├── utils/                 # Вспомогательные утилиты
│   ├── config.py           # Конфигурация ключей и путей
│   └── logger.py           # Логгирование процессов
├── Dockerfile             # Docker-образ для быстрой и удобной сборки
├── init.py                # Начальная инициализация приложения
├── requirements.txt       # Требования для окружения Python
```

## Классы из папки services — назначение

- **embeddings.py**  
  Класс: `CloudRuEmbeddings`  
  Описание: Получение эмбеддингов (векторных представлений) текстов. Служит мостом к Cloud.ru/OpenAI API, отвечает за преобразование текста в числовой вид для хранения и поиска.

- **entity_extractor.py**  
  Класс: `EntityExtractor`  
  Описание: Извлекает именованные сущности (персоны, даты, организации, объекты) из текста, облегчает поиск по графу (Neo4j) и обработку документа.

- **html_parser.py**  
  Класс: `HtmlParser`  
  Описание: Разбирает и экстрагирует полезный контент из .html файлов, очищает текст для последующего анализа и индексации.

- **models.py**  
  Класс: `SearchResult`, другие модели  
  Описание: Описывает структуру поискового результата, типы данных, вспомогательные структуры для хранения состояния.

- **neo4j_manager.py**  
  Класс: `Neo4jGraphManager`  
  Описание: Управляет графовой базой знаний Neo4j, добавляет и связывает объекты, делает поиск по сущностям, поддерживает построение сложных графов.

- **ocr.py**  
  Класс: `YandexOCRProcessor`  
  Описание: Конвертирует изображения, PDF и другие форматы в текст с помощью OCR (распознавания), нормализует входные данные для системы.

- **qdrant_manager.py**  
  Класс: `QdrantVectorManager`  
  Описание: Взаимодействует с векторной базой Qdrant, отвечает за хранение, поиск и обновление векторных данных, реализация dense retrieval.

- **rag_system.py**  
  Класс: `HybridRAGSystem`  
  Описание: Связывает все компоненты вместе, реализует гибридный поиск (граф + вектор), при необходимости управляет chunking, генерацией ответов, интеграцией с LLM.

---

*Docker маршрутизирует отдельные процессы приложения, а сервисные классы отвечают за независимую обработку, хранение и поиск информации внутри платформы.*

### ask.py

- Назначение: Запуск сервиса обработки пользовательских запросов к базе знаний.
- Функция: Принимает вопрос пользователя, преобразует и анализирует запрос, запускает поиск по базе знаний (векторной и графовой), формирует контекст, генерирует итоговый ответ при помощи LLM.
- Запуск: Работает как отдельный серверный процесс или endpoint, принимает запросы от пользователя через консоль, API или web-интерфейс.

---

### init.py

- Назначение: Инициализация окружения и подготовка всех требуемых ресурсов перед активной работой системы.
- Функция: Проверяет наличие и создает необходимые папки, настраивает переменные среды, инициализирует базовые структуры данных, может создавать индексы и связи в базах знаний ещё до появления данных.
- Запуск: Выполняется автоматически первым процессом внутри контейнера при старте Docker-окружения, либо вручную для повторной настройки среды.

---

### ingest.py

- Назначение: Обработка и добавление новых данных и документов в базу знаний.
- Функция: Следит за входящими файлами или папкой, запускает цепочку обработки — OCR, парсинг, разделение на чанки, извлечение сущностей, получение эмбеддингов, обновление индексов и баз знаний.
- Запуск: Работает как отдельный процесс-демон, может автоматически стартовать при появлении новых файлов, обеспечивает